---
lab:
  title: Azure Database for PostgreSQL 살펴보기
  module: Explore PostgreSQL architecture
---

# Azure Database for PostgreSQL 살펴보기

이 연습에서는 Azure Database for PostgreSQL 유연한 서버를 만들고 백업 보존 기간을 구성합니다.

## 시작하기 전에

이 연습을 완료하려면 자체 Azure 구독이 필요합니다. Azure 구독이 아직 없는 경우 [Azure 평가판](https://azure.microsoft.com/free)을 만들 수 있습니다.

### 리소스 그룹 만들기

1. 웹 브라우저에서 [Azure Portal](https://portal.azure.com)로 이동합니다. 소유자 또는 기여자 계정을 사용하여 로그인합니다.
2. Azure 서비스 아래 **리소스 그룹**을 선택한 다음 **+ 만들기**를 선택합니다.
3. 올바른 구독이 표시되었는지 확인한 다음, 리소스 그룹 이름에 **rg-PostgreSQL_Flexi**를 입력합니다. **지역**을 선택합니다.
4. **검토 + 만들기**를 선택합니다. 그런 다음 **만들기**를 선택합니다.

### Azure Database for PostgreSQL 유연한 서버 만들기

1. Azure 서비스 아래에서 **+ 리소스 만들기**를 선택합니다.
    1. **마켓플레이스 검색**에서 **`azure database for postgresql flexible server`** 입력 후, **Azure Database for PostgreSQL 유연한 서버**를 선택한 다음 **만들기**를 클릭합니다.
1. 유연한 서버 **기본 사항** 탭에서 다음과 같이 각 필드에 입력합니다.
    1. 구독 - 사용자의 구독.
    1. 리소스 그룹 - **rg-PostgreSQL_Flexi**.
    1. 서버 이름 - **psql-postgresql-fx9999**(서버 이름은 전역적으로 고유해야 하므로 9999를 4자리 난수로 바꿔야 함).
    1. 지역 - 리소스 그룹과 동일한 지역을 선택합니다.
    1. PostgreSQL 버전 - 16을 선택합니다.
    1. 워크로드 유형 - **개발**.
    1. 컴퓨팅 + 스토리지 - **버스트 가능, B1ms**. **서버 구성**을 선택하고 구성 옵션을 검사합니다. 아무 항목도 변경하지 않고 오른쪽 모서리에 있는 블레이드를 닫습니다.
    1. 가용성 영역 - 기본 설정 없음.
    1. 고가용성 - 사용 안 함.
    1. 인증 방법 - **PostgreSQL 인증만**
    1. **관리 사용자 이름**에는 **`demo`** 을(를) 입력합니다.
    1. **암호**에 적절히 복잡한 암호를 입력합니다.
    1. **다음: 네트워킹 >** 을 선택합니다.
1. 유연한 서버 **네트워킹** 탭에서 다음과 같이 각 필드에 입력합니다.
    1. 연결 방법: (o) 공용 액세스(허용된 IP 주소) 및 프라이빗 엔드포인트
    1. 공용 액세스, **공용 IP 주소를 사용하여 인터넷을 통해 이 리소스에 대한 공용 액세스 허용**을 선택합니다.
    1. 방화벽 규칙 아래에서 **+ 현재 클라이언트 IP 주소 추가**를 선택하여 현재 IP 주소를 방화벽 규칙으로 추가합니다. 필요에 따라 이 방화벽 규칙의 이름을 의미 있는 것으로 지정할 수 있습니다.
1. **검토 + 만들기**를 선택합니다. 설정을 검토한 다음 **만들기**를 선택하여 Azure Database for PostgreSQL 유연한 서버를 만듭니다. 배포가 완료되면 다음 단계를 위해 준비된 **리소스로 이동**을 선택합니다.

## 서버 매개 변수 검사

1. **설정** 아래에서 **서버 매개 변수**를 선택합니다.
1. **항목을 필터링하기 위해 검색 ...** 상자에 **`connections`** 을(를) 입력합니다. 연결과 관련된 서버 매개 변수가 표시됩니다. **max_connections**의 값을 적어둡니다. 아무 항목도 변경하지 마세요.
1. 왼쪽 메뉴에서 **개요**를 선택하여 **서버 매개 변수**를 종료합니다.

## 백업 보존 기간 변경

1. **개요** 블레이드로 이동하고 **설정** 아래에서 **컴퓨팅 + 스토리지**를 선택합니다. 이 섹션에는 현재 컴퓨팅 계층과 이를 업그레이드하는 옵션이 표시됩니다. 또한 프로비저닝한 스토리지의 양과 스토리지를 늘리는 옵션도 표시됩니다.
1. **백업** 아래에 백업 보존 기간(일)이 표시됩니다. 슬라이더 막대를 사용하여 백업 보존 기간을 14일로 변경합니다. **저장**을 선택하여 변경 사항을 보존합니다.
1. 이 연습을 완료했으면 **개요** 블레이드로 이동한 후 **STOP**을 클릭하면 서버가 중지됩니다.
    1. 서버가 중지 상태일 때는 요금이 부과되지 않지만 삭제하지 않은 경우 7일 이내에 서버가 다시 시작됩니다.

## 선택적 연습 - 고가용성 서버 구성

1. Azure 서비스 아래에서 **+ 리소스 만들기**를 선택합니다.
    1. **마켓플레이스 검색**에서 **`azure database for postgresql flexible server`** 입력 후, **Azure Database for PostgreSQL 유연한 서버**를 선택한 다음 **만들기**를 클릭합니다.
1. 유연한 서버 **기본 사항** 탭에서 다음과 같이 각 필드에 입력합니다.
    1. 구독 - 사용자의 구독.
    1. 리소스 그룹 - **rg-PostgreSQL_Flexi**.
    1. 서버 이름 - **psql-postgresql-fx8888**(서버 이름은 전역적으로 고유해야 하므로 8888을 난수로 바꿔야 함).
    1. 지역 - 리소스 그룹과 동일한 지역을 선택합니다.
    1. PostgreSQL 버전 - 16을 선택합니다.
    1. 워크로드 유형 - **프로덕션(소형/중형)**
    1. 컴퓨팅 + 스토리지 - **범용**으로 둠.
    1. 가용성 영역 - 이를 "기본 설정 없음"으로 두면 Azure에서 주 서버 및 보조 서버에 대한 가용성 영역을 자동으로 선택합니다. 또는 애플리케이션과 공동 배치할 가용성 영역을 지정합니다.
    1. 고가용성 사용 - 선택합니다. 이 옵션을 선택하면 예상 비용을 기록해 둡니다.
    1. 고가용성 모드 - **영역 중복 - 대기 서버는 주 서버와 동일한 지역의 다른 영역 내에서 항상 사용할 수 있습니다**를 선택합니다.
    1. 인증 방법 - **PostgreSQL 인증만**
    1. **관리 사용자 이름**에 **demo**를 입력합니다.
    1. **암호**에 적절히 복잡한 암호를 입력합니다.
    1. **다음: 네트워킹 >** 을 선택합니다.
1. 유연한 서버 **네트워킹** 탭에서 다음과 같이 각 필드에 입력합니다.
    1. 연결 방법: (o) 공용 액세스(허용된 IP 주소) 및 프라이빗 엔드포인트
    1. 공용 액세스, **공용 IP 주소를 사용하여 인터넷을 통해 이 리소스에 대한 공용 액세스 허용**을 선택합니다.
    1. 방화벽 규칙 아래에서 **+ 현재 클라이언트 IP 주소 추가**를 선택하여 현재 IP 주소를 방화벽 규칙으로 추가합니다. 필요에 따라 이 방화벽 규칙의 이름을 의미 있는 것으로 지정할 수 있습니다.
1. **검토 + 만들기**를 선택합니다. 설정을 검토한 다음 **만들기**를 선택하여 Azure Database for PostgreSQL 유연한 서버를 만듭니다. 배포가 완료되면 다음 단계를 위해 준비된 **리소스로 이동**을 선택합니다.

### 새 서버 검사

1. **설정** 아래에서 **고가용성**을 선택합니다. 고가용성이 활성화되었으며, 기본 가용성 영역은 영역 1이어야 합니다.
    1. 대기 가용성 영역은 자동으로 할당되고 주 가용성 영역과 다르며 일반적으로 영역 2입니다.

### 장애 조치 강제 적용

1. **고가용성** 블레이드의 상단 메뉴에서 **강제 장애 조치(failover)** 를 선택합니다. 메시지가 표시되면 **확인**을 선택합니다.
1. 장애 조치(failover) 프로세스가 시작됩니다. 장애 조치(failover) 작업이 성공적으로 완료되면 메시지가 표시됩니다.
1. **고가용성** 블레이드에서 이제 기본 영역이 2이고 대기 가용성 영역이 1임을 확인할 수 있습니다. 최신 정보를 보려면 브라우저를 새로 고쳐야 할 수 있습니다.
1. 이 연습을 완료했으면 서버를 삭제합니다.

## 정리

이 랩 연습의 서버는 요금이 부과됩니다. 연습을 완료한 후 리소스 그룹 **rg-PostgreSQL_Flexi**를 삭제합니다. 이렇게 하면 이 랩 연습에서 배포한 서버 및 기타 리소스가 제거됩니다.
